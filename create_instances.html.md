# Create Instances


<!-- WARNING: THIS FILE WAS AUTOGENERATED! DO NOT EDIT! -->

``` python
# TODO: Maybe we don't need this file. We can use the app to create instances and place those in the database.
```

## Tools

The function
[`tools_from_code`](https://Hopsakee.github.io/infoflow/create_instances.html#tools_from_code)
can be used to create instances for every
[`Tool`](https://Hopsakee.github.io/infoflow/classes_db.html#tool)
available. The instances are hardcoded in the function. This function
can be used to start a fresh database.

The function `tools_from_db` can be used to create instances for every
[`Tool`](https://Hopsakee.github.io/infoflow/classes_db.html#tool)
available in the database.

In both cases the function does not return anything. The available
instances are tracked in the
[`Tool`](https://Hopsakee.github.io/infoflow/classes_db.html#tool) class
and can be retrieved as a list using the `get_instances` method on the
[`Tool`](https://Hopsakee.github.io/infoflow/classes_db.html#tool)
class.

We must start with creating instances for each
[`Tool`](https://Hopsakee.github.io/infoflow/classes_db.html#tool) that
we can use. This must be done before we can create instances for the
[`InformationItem`](https://Hopsakee.github.io/infoflow/classes_db.html#informationitem)
and
[`Improvement`](https://Hopsakee.github.io/infoflow/classes_db.html#improvement)
classes, because both have fields that are validated against the field
`name` in the
[`Tool`](https://Hopsakee.github.io/infoflow/classes_db.html#tool)
class.

------------------------------------------------------------------------

<a
href="https://github.com/Hopsakee/infoflow/blob/main/infoflow/creinst.py#L13"
target="_blank" style="float:right; font-size:smaller">source</a>

### tools_from_code

>  tools_from_code ()

*Create all Tool instances as defined in the code.*

The next stap is to define instances for each
[`InformationItem`](https://Hopsakee.github.io/infoflow/classes_db.html#informationitem)
we have.

``` python
tools_from_code()
Tool.get_instances()
```

    {'reader': Tool(id=101, name='Reader', description=None, organization_system=[<OrganizationSystem.TAGS: 'tags'>], phase_quality=PhaseQualityData(collect=<PhaseQuality.GREAT: 'great'>, retrieve=<PhaseQuality.BAD: 'bad'>, consume=<PhaseQuality.GREAT: 'great'>, extract=<PhaseQuality.NA: 'na'>, refine=<PhaseQuality.NA: 'na'>), collect=None, retrieve=None, consume=None, extract=None, refine=None, slug='reader'),
     'recall': Tool(id=102, name='Recall', description=None, organization_system=[<OrganizationSystem.LINKS: 'links'>], phase_quality=PhaseQualityData(collect=<PhaseQuality.GREAT: 'great'>, retrieve=<PhaseQuality.GREAT: 'great'>, consume=<PhaseQuality.NA: 'na'>, extract=<PhaseQuality.NA: 'na'>, refine=<PhaseQuality.GREAT: 'great'>), collect=None, retrieve=None, consume=None, extract=None, refine=None, slug='recall'),
     'readwise': Tool(id=103, name='Readwise', description=None, organization_system=[<OrganizationSystem.TAGS: 'tags'>], phase_quality=PhaseQualityData(collect=<PhaseQuality.NA: 'na'>, retrieve=<PhaseQuality.OK: 'ok'>, consume=<PhaseQuality.NA: 'na'>, extract=<PhaseQuality.GREAT: 'great'>, refine=<PhaseQuality.OK: 'ok'>), collect=None, retrieve=None, consume=None, extract=None, refine=None, slug='readwise'),
     'obsidian': Tool(id=104, name='Obsidian', description=None, organization_system=[<OrganizationSystem.JOHNNY_DECIMAL: 'johnny_decimal'>, <OrganizationSystem.LINKS: 'links'>], phase_quality=PhaseQualityData(collect=<PhaseQuality.NA: 'na'>, retrieve=<PhaseQuality.OK: 'ok'>, consume=<PhaseQuality.OK: 'ok'>, extract=<PhaseQuality.GREAT: 'great'>, refine=<PhaseQuality.GREAT: 'great'>), collect=None, retrieve=None, consume=None, extract=None, refine=None, slug='obsidian'),
     'librarything': Tool(id=105, name='LibraryThing', description=None, organization_system=[<OrganizationSystem.TAGS: 'tags'>], phase_quality=PhaseQualityData(collect=<PhaseQuality.OK: 'ok'>, retrieve=<PhaseQuality.BAD: 'bad'>, consume=<PhaseQuality.NA: 'na'>, extract=<PhaseQuality.NA: 'na'>, refine=<PhaseQuality.NA: 'na'>), collect=None, retrieve=None, consume=None, extract=None, refine=None, slug='librarything'),
     'snipd': Tool(id=106, name='Snipd', description=None, organization_system=[<OrganizationSystem.FOLDERS: 'folders'>], phase_quality=PhaseQualityData(collect=<PhaseQuality.OK: 'ok'>, retrieve=<PhaseQuality.BAD: 'bad'>, consume=<PhaseQuality.GREAT: 'great'>, extract=<PhaseQuality.NA: 'na'>, refine=<PhaseQuality.NA: 'na'>), collect=None, retrieve=None, consume=None, extract=None, refine=None, slug='snipd'),
     'neoreader': Tool(id=107, name='NeoReader', description=None, organization_system=[<OrganizationSystem.FOLDERS: 'folders'>], phase_quality=PhaseQualityData(collect=<PhaseQuality.OK: 'ok'>, retrieve=<PhaseQuality.BAD: 'bad'>, consume=<PhaseQuality.GREAT: 'great'>, extract=<PhaseQuality.NA: 'na'>, refine=<PhaseQuality.NA: 'na'>), collect=None, retrieve=None, consume=None, extract=None, refine=None, slug='neoreader'),
     'youtube': Tool(id=108, name='YouTube', description=None, organization_system=[<OrganizationSystem.FOLDERS: 'folders'>], phase_quality=PhaseQualityData(collect=<PhaseQuality.OK: 'ok'>, retrieve=<PhaseQuality.BAD: 'bad'>, consume=<PhaseQuality.OK: 'ok'>, extract=<PhaseQuality.NA: 'na'>, refine=<PhaseQuality.NA: 'na'>), collect=None, retrieve=None, consume=None, extract=None, refine=None, slug='youtube')}

``` python
Tool.get_instances()['reader']
```

    Tool(id=101, name='Reader', description=None, organization_system=[<OrganizationSystem.TAGS: 'tags'>], phase_quality=PhaseQualityData(collect=<PhaseQuality.GREAT: 'great'>, retrieve=<PhaseQuality.BAD: 'bad'>, consume=<PhaseQuality.GREAT: 'great'>, extract=<PhaseQuality.NA: 'na'>, refine=<PhaseQuality.NA: 'na'>), collect=None, retrieve=None, consume=None, extract=None, refine=None, slug='reader')

## InformationItems

Just as with the `Tools` we have two functions to create instances for
every
[`InformationItem`](https://Hopsakee.github.io/infoflow/classes_db.html#informationitem).
We can use the function
[`informationitems_from_code`](https://Hopsakee.github.io/infoflow/create_instances.html#informationitems_from_code)
to create instances for every
[`InformationItem`](https://Hopsakee.github.io/infoflow/classes_db.html#informationitem)
available from the definitions hardcoded in the function. This function
can be used to start a fresh database. We can use the function
`informationitems_from_db` to create instances for every
[`InformationItem`](https://Hopsakee.github.io/infoflow/classes_db.html#informationitem)
available in the database.

These functions don‚Äôt return anything. The available instances are
tracked in the
[`InformationItem`](https://Hopsakee.github.io/infoflow/classes_db.html#informationitem)
class and can be retrieved as a list using the `get_instances` method on
the
[`InformationItem`](https://Hopsakee.github.io/infoflow/classes_db.html#informationitem)
class.

------------------------------------------------------------------------

<a
href="https://github.com/Hopsakee/infoflow/blob/main/infoflow/creinst.py#L119"
target="_blank" style="float:right; font-size:smaller">source</a>

### informationitems_from_code

>  informationitems_from_code ()

*Create all InformationItem instances as defined in the code.*

Check all the available tools and information items.

``` python
informationitems_from_code()
```

``` python
InformationItem.get_instances()
```

    {'web_article': InformationItem(id=209, name='Web Article', info_type=<InformationType.WEB_ARTICLE: 'web_article'>, method=PhaseMethodData(collect=<Method.MANUAL: 'manual'>, retrieve=None, consume=None, extract=None, refine=None), toolflow=PhaseToolflowData(collect=('reader', 'recall'), retrieve='recall', consume='reader', extract=None, refine=None), slug='web_article'),
     'annotation': InformationItem(id=202, name='Annotation', info_type=<InformationType.ANNOTATION: 'annotations&highlights'>, method=PhaseMethodData(collect=<Method.AUTOMATIC: 'automatic'>, retrieve=None, consume=None, extract=None, refine=None), toolflow=PhaseToolflowData(collect=None, retrieve=None, consume=None, extract='readwise', refine=('recall', 'obsidian')), slug='annotation'),
     'note': InformationItem(id=203, name='Note', info_type=<InformationType.NOTE: 'note'>, method=PhaseMethodData(collect=<Method.MANUAL: 'manual'>, retrieve=None, consume=None, extract=None, refine=None), toolflow=PhaseToolflowData(collect=None, retrieve='obsidian', consume='obsidian', extract='obsidian', refine='obsidian'), slug='note'),
     'book': InformationItem(id=204, name='Book', info_type=<InformationType.BOOK: 'book'>, method=PhaseMethodData(collect=<Method.MANUAL: 'manual'>, retrieve=None, consume=None, extract=None, refine=None), toolflow=PhaseToolflowData(collect='librarything', retrieve='librarything', consume='neoreader', extract='readwise', refine='obsidian'), slug='book'),
     'podcast': InformationItem(id=205, name='Podcast', info_type=<InformationType.PODCAST: 'podcast'>, method=PhaseMethodData(collect=<Method.AUTOMATIC: 'automatic'>, retrieve=None, consume=None, extract=None, refine=None), toolflow=PhaseToolflowData(collect='snipd', retrieve='snipd', consume='snipd', extract='readwise', refine='obsidian'), slug='podcast'),
     'research_paper': InformationItem(id=206, name='Research Paper', info_type=<InformationType.RESEARCH_PAPER: 'research_paper'>, method=PhaseMethodData(collect=<Method.MANUAL: 'manual'>, retrieve=None, consume=None, extract=None, refine=None), toolflow=PhaseToolflowData(collect=('recall', 'neoreader'), retrieve=('recall', 'neoreader'), consume='neoreader', extract='readwise', refine=('obsidian', 'recall')), slug='research_paper'),
     'document': InformationItem(id=207, name='Document', info_type=<InformationType.DOCUMENT: 'document'>, method=PhaseMethodData(collect=<Method.MANUAL: 'manual'>, retrieve=None, consume=None, extract=None, refine=None), toolflow=PhaseToolflowData(collect='neoreader', retrieve='neoreader', consume='neoreader', extract='readwise', refine=('obsidian', 'recall')), slug='document'),
     'youtube_video': InformationItem(id=208, name='YouTube Video', info_type=<InformationType.YOUTUBE_VIDEO: 'youtube_video'>, method=PhaseMethodData(collect=<Method.AUTOMATIC: 'automatic'>, retrieve=None, consume=None, extract=None, refine=None), toolflow=PhaseToolflowData(collect='youtube', retrieve='youtube', consume='youtube', extract='obsidian', refine='obsidian'), slug='youtube_video')}

# Add instances to SQLite database

The function below can be used to create a fresh database filled with
all the instances created in this notebook.

------------------------------------------------------------------------

<a
href="https://github.com/Hopsakee/infoflow/blob/main/infoflow/creinst.py#L258"
target="_blank" style="float:right; font-size:smaller">source</a>

### db_from_instances

>  db_from_instances (db_loc:pathlib.Path='../data/infoflow.db',
>                         toolclass:infoflow.classdb.Tool=<class
>                         'infoflow.classdb.Tool'>, informationitemclass:infoflo
>                         w.classdb.InformationItem=<class
>                         'infoflow.classdb.InformationItem'>,
>                         dbclose:bool=True)

*Create a fresh database filled with all the instances created in this
notebook.*

<table>
<colgroup>
<col style="width: 6%" />
<col style="width: 25%" />
<col style="width: 34%" />
<col style="width: 34%" />
</colgroup>
<thead>
<tr>
<th></th>
<th><strong>Type</strong></th>
<th><strong>Default</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>db_loc</td>
<td>Path</td>
<td>../data/infoflow.db</td>
<td>Location of the database, usually ‚Äú../data/infoflow.db‚Äù</td>
</tr>
<tr>
<td>toolclass</td>
<td>Tool</td>
<td>Tool</td>
<td>De Tool dataclass, containing all the tool intances</td>
</tr>
<tr>
<td>informationitemclass</td>
<td>InformationItem</td>
<td>InformationItem</td>
<td>The InformationItem dataclass, containing all the information item
instances</td>
</tr>
<tr>
<td>dbclose</td>
<td>bool</td>
<td>True</td>
<td>Whether to close the database connection after creating the
database</td>
</tr>
<tr>
<td><strong>Returns</strong></td>
<td><strong>apswutils.db.Database | None</strong></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>

<div>

> **Warning**
>
> Only uncomment next line if you want to create a fresh database filled
> with all the instances created in this notebook. This will overwrite
> any existing database.

</div>

``` python
# db_from_instanes()
```

**Tests**

``` python
db = db_from_instances(":memory:", dbclose=False)
```

``` python
db.t.information_items()[3]
```

    {'id': 205,
     'name': 'Podcast',
     'info_type': 'podcast',
     'slug': 'podcast',
     'collect_method': 'automatic',
     'retrieve_method': None,
     'consume_method': None,
     'extract_method': None,
     'refine_method': None,
     'collect_toolflow': 'snipd',
     'retrieve_toolflow': 'snipd',
     'consume_toolflow': 'snipd',
     'extract_toolflow': 'readwise',
     'refine_toolflow': 'obsidian'}

``` python
db.close()
```

    AttributeError: 'NoneType' object has no attribute 'close'
    [31m---------------------------------------------------------------------------[39m
    [31mAttributeError[39m                            Traceback (most recent call last)
    [36mCell[39m[36m [39m[32mIn[24][39m[32m, line 1[39m
    [32m----> [39m[32m1[39m [43mdb[49m[43m.[49m[43mclose[49m()

    [31mAttributeError[39m: 'NoneType' object has no attribute 'close'
